# little-research-lab-v3 — Tasklist (dependency-ordered)

Rules:
- Tasks are 30–120 minutes, acyclic, and reference Spec IDs (E#.#), Test Assertions (TA-####), and Regression invariants (R#).
- Preserve task IDs/order forever; append new tasks only.
- Evidence must include artifacts produced by quality gates where applicable.

| id | title | spec_refs(E/TA/R) | depends_on | files_expected | tests_required | status | evidence | notes |
|---|---|---|---|---|---|---|---|---|
| T-0001 | Create atomic component skeleton + repo layout + manifests | E0,R1 |  | app/ (core,shell,adapters), components/ manifests/, artifacts/ | TA-0000 (structure lint) | done | artifacts/pytest-structure-report.json | Started 2026-01-11; OQ1-3 resolved via D-0008/D-0009/D-0010; Completed 2026-01-11 |
| T-0002 | Implement rules loader + schema validator (fail-fast) | E0,HV1,HV2 | T-0001 | little-research-lab-v3_rules.yaml schema validator, startup hook | TA-0100 (rules schema) | done | artifacts/pytest-rules-report.json | 26 tests for TA-0100 (HV1+HV2 validation); Completed 2026-01-11 |
| T-0003 | Add quality gates runner + evidence writer | QG,R1 | T-0001 | scripts/quality_gates.py, artifacts/ outputs | TA-0101 (gates JSON) | done | artifacts/pytest-quality-gates-report.json | 41 tests for TA-0101 (gates produce valid JSON artifacts); Completed 2026-01-12 |
| T-0004 | Add CI hook to block merge on failed gates | QG | T-0003 | .github/workflows/* or equivalent | TA-0102 (CI config smoke) | done | artifacts/pytest-ci-config-report.json | 25 tests for TA-0102 (CI config smoke); Completed 2026-01-12 |
| T-0005 | Define DB adapter interfaces (SQLite now, Postgres-ready) | P1,E1-E8 | T-0001 | core/ports/db.py, adapters/sqlite_db.py | TA-0103 (repo contract tests) | done | artifacts/pytest-db-ports-report.json | 18 contract tests for E4-E8 repos + UoW; Completed 2026-01-11 |
| T-0006 | Define Object Storage adapter interface + local implementation | P2,E3,E4,R2 | T-0001 | core/ports/storage.py, adapters/local_storage.py | TA-0104 (immutable key) | done | artifacts/pytest-storage-report.json | 21 tests for immutability (I3,R2); Completed 2026-01-11 |
| T-0007 | Define Time/Timezone adapter with DST test fixtures | P3,E5,TA-0027 | T-0001 | core/ports/time.py, adapters/time_london.py | TA-0027 | done | artifacts/pytest-time-report.json | 24 tests for TA-0027 (DST boundary cases); Completed 2026-01-11 |
| T-0008 | Define Job Runner adapter interface + dev runner | P4,E5 | T-0001 | core/ports/jobs.py, adapters/dev_jobs.py | TA-0105 (job trigger) | done | artifacts/pytest-jobs-report.json | 22 tests for TA-0105 (job trigger/execution); Completed 2026-01-11 |
| T-0009 | Implement SettingsService (E1) + validation rules | E1.1,TA-0001,TA-0002,R6 | T-0002,T-0005 | src/components/settings/component.py | TA-0001,TA-0002 | done | artifacts/pytest-settings-report.json | 30 tests for TA-0001 (defaults) + TA-0002 (validation); Completed 2026-01-11 |
| T-0010 | Implement settings API endpoints (admin) | E1.1 | T-0009 | shell/http/admin_settings.py | TA-0001,TA-0002 | done | artifacts/pytest-admin-settings-api-report.json | 20 tests for TA-0001 (defaults) + TA-0002 (validation); API at /api/admin/settings; Completed 2026-01-11 |
| T-0011 | Implement public SSR metadata builder (RenderService) | E1.2,TA-0004,R6 | T-0002,T-0009 | src/components/render/component.py | TA-0004,TA-0005 | done | artifacts/pytest-render-report.json | 33 tests for TA-0004 (SSR meta) + TA-0005 (OG image); Completed 2026-01-11 |
| T-0012 | Wire SSR pages to settings + metadata | E1.2,TA-0003 | T-0011 | shell/http/public_routes.py | TA-0003,TA-0004 | done | artifacts/pytest-public-ssr-report.json | 21 tests for TA-0003 (settings reflected) + TA-0004 (meta snapshot); SSR routes at /,/p/{slug},/page/{slug}; Completed 2026-01-11 |
| T-0013 | Build admin Settings UI page | E1.1 | T-0010 | shell/ui/settings.* | TA-0001 | done | Frontend Build Pass; Manual UI Impl (shadcn/ui + react-hook-form) | Completed 2026-01-12 |
| T-0014 | Implement AssetService upload pipeline + hashing | E2.1,TA-0006-0008,R2 | T-0002,T-0005,T-0006 | src/components/assets/component.py | TA-0006,TA-0007,TA-0008 | done | artifacts/pytest-assets-report.json | 36 tests for TA-0006 (MIME) + TA-0007 (size) + TA-0008 (sha256); Completed 2026-01-11 |
| T-0015 | Implement asset upload API + admin assets list API | E2.1 | T-0014 | shell/http/admin_assets.py | TA-0006-0008 | done | artifacts/pytest-admin-assets-api-report.json | 27 tests for TA-0006 (MIME) + TA-0007 (size) + TA-0008 (sha256); API at /api/admin/assets; Completed 2026-01-11 |
| T-0016 | Implement versioned asset serving route + headers | E2.2,TA-0009-0011,R2 | T-0014 | shell/http/public_assets.py | TA-0009,TA-0010,TA-0011 | done | artifacts/pytest-public-assets-report.json | 29 tests for TA-0009 (headers) + TA-0010 (ETag) + TA-0011 (download); Routes at /assets/{id}/v/{vid}, /assets/{id}/latest; Completed 2026-01-11 |
| T-0017 | Implement /latest alias resolution + admin set_latest | E2.3,TA-0012-0013 | T-0014,T-0016 | src/components/assets/component.py (latest), shell/http/admin_assets_latest.py | TA-0012,TA-0013 | done | Unit tests pass for set_latest (TA-0012) and resolution (TA-0013); Completed 2026-01-12 |
| T-0018 | Implement ContentService core model + state machine (rules-driven) | E2,E4,SM1,R1 | T-0002,T-0005 | src/components/content/component.py | TA-0110 (state machine) | done | artifacts/pytest-content-report.json | 46 tests for TA-0110 (state machine + publish guards); Completed 2026-01-11 |
| T-0019 | Implement Resource(PDF) content fields + validation | E3.1,TA-0014-0015 | T-0018,T-0014 | src/components/content/component.py (resource_pdf) | TA-0014,TA-0015 | done | artifacts/pytest-resource-pdf-report.json | 24 tests for TA-0014 (draft persistence) + TA-0015 (pinned policy); Completed 2026-01-11 |
| T-0020 | Admin UI for Resource(PDF) create/edit | E3.1 | T-0019,T-0015 | shell/ui/resource_editor.* | TA-0014 | todo |  |  |
| T-0021 | Public SSR route for Resource(PDF) + embed/fallback links | E3.2,TA-0016-0018 | T-0019,T-0011,T-0012 | shell/http/public_resource.py | TA-0016,TA-0017,TA-0018 | todo |  |  |
| T-0022 | Add PDF viewer embed strategy + iOS/Safari fallback test harness | E3.2 | T-0021 | shell/ui/pdf_viewer.* | TA-0017 | todo |  |  |
| T-0023 | Implement RichText schema + sanitizer (server-side) | E4.1,E4.2,TA-0019-0022,R1 | T-0018 | src/components/richtext/component.py | TA-0019,TA-0021,TA-0022 | done | artifacts/pytest-richtext-report.json | 51 tests for TA-0019 (schema) + TA-0021 (sanitizer) + TA-0022 (link safety); Completed 2026-01-12 |
| T-0024 | Implement admin rich text editor UI (TipTap/ProseMirror) | E4.1 | T-0023,T-0015 | shell/ui/richtext_editor.* | TA-0020 | done | Frontend Build Pass; TipTap implementation in shell/ui; Completed 2026-01-12 |
| T-0025 | Inline image insert workflow in editor + reference tracking | E4.3,TA-0023 | T-0024,T-0015 | shell/ui/richtext_images.* | TA-0023 | done | Frontend Build Pass; AssetService + Toolbar Upload; Completed 2026-01-12 |
| T-0026 | Implement Post public SSR renderer from rich_text_json (+derived blocks if needed) | E4.4,TA-0025 | T-0023,T-0011 | src/components/render_posts/component.py | TA-0025 | done | artifacts/pytest-render-posts-report.json | 38 tests for TA-0025 (semantic HTML rendering); Completed 2026-01-12 |
| T-0027 | Implement admin preview endpoint for content parity | E4.4 | T-0026 | shell/http/admin_preview.py | TA-0025 | done | artifacts/pytest-admin-preview-api-report.json | 17 tests for TA-0025 (preview parity); API at /api/admin/preview; Completed 2026-01-12 |
| T-0028 | Implement SchedulerService: create/claim/run PublishJobs with idempotency | E5.2,TA-0028-0030,R3 | T-0007,T-0008,T-0018 | src/components/scheduler/component.py | TA-0028,TA-0029,TA-0030 | done | artifacts/pytest-scheduler-report.json | 30 tests for TA-0028 (idempotency) + TA-0029 (claim/execute) + TA-0030 (retry/backoff); Completed 2026-01-12 |
| T-0029 | Implement admin scheduling API (schedule/unschedule/publish_now) | E5.1,E5.2 | T-0028 | shell/http/admin_schedule.py | TA-0026,TA-0033 | done | artifacts/pytest-admin-schedule-api-report.json | 17 tests for TA-0026 (schedule/unschedule) + TA-0033 (publish now); API at /api/admin/schedule; Completed 2026-01-12 |
| T-0030 | Implement admin schedule calendar API (list by range) | E5.3,TA-0031 | T-0029 | shell/http/admin_calendar.py | TA-0031 | done | Unit tests pass for list_jobs_in_range service method (TA-0031); Completed 2026-01-12 |
| T-0031 | Implement admin calendar UI | E5.3 | T-0030 | shell/ui/calendar.* | TA-0032 | done | Frontend Build Pass; Manual UI Impl (shadcn/ui + date-fns) | Completed 2026-01-12 |
| T-0032 | Implement analytics ingestion endpoint + validation + rate limits | E6.1,TA-0034-0035,R4 | T-0002,T-0005 | shell/http/analytics_ingest.py | TA-0034,TA-0035 | done | artifacts/pytest-analytics-ingest-report.json | 69 tests for TA-0034 (event validation) + TA-0035 (PII prevention); API at /a/event; Completed 2026-01-12 |
| T-0033 | Implement attribution parsing (UTM, referrer domain) | E6.2,TA-0036-0037 | T-0032 | src/components/analytics/component.py | TA-0036,TA-0037 | done | artifacts/pytest-analytics-attrib-report.json | 44 tests for TA-0036 (UTM parsing) + TA-0037 (referrer domain); Completed 2026-01-12 |
| T-0034 | Implement dedupe + bot classification | E6.3,TA-0039-0040 | T-0032 | src/components/analytics/component.py | TA-0039,TA-0040 | done | artifacts/pytest-analytics-dedupe-report.json | 46 tests for TA-0039 (dedupe) + TA-0040 (bot classification); Completed 2026-01-12 |
| T-0035 | Implement aggregate bucketing writer (minute/hour/day) | E6.1,E6.4 | T-0032,T-0033,T-0034 | src/components/analytics/component.py | TA-0041 | done | artifacts/pytest-analytics-aggregate-report.json | 42 tests for TA-0041 (bucket creation/increment/queries); Completed 2026-01-12 |
| T-0036 | Implement admin analytics dashboard queries API | E6.4,TA-0041-0042 | T-0035 | shell/http/admin_analytics.py | TA-0041,TA-0042 | done | artifacts/pytest-admin-analytics-api-report.json | 23 tests for TA-0041 (totals/time series) + TA-0042 (top content/sources/referrers); API at /api/admin/analytics; Completed 2026-01-12 |
| T-0037 | Implement admin analytics UI | E6.4 | T-0036 | shell/ui/analytics.* | TA-0042 | done | Frontend Build Pass; Manual UI Impl (shadcn/ui + recharts) | Completed 2026-01-12 |
| T-0038 | Implement outbound click measurement route (optional) preserving UTMs | E6.2,TA-0038 | T-0032 | shell/http/outbound.py | TA-0038 | done | artifacts/pytest-outbound-report.json | 28 tests for TA-0038 (click tracking + UTM preservation); API at /out/go, /out/click/{link_id}; Completed 2026-01-12 |
| T-0039 | Implement RedirectService validation (loop/open redirect/chain/collision) | E7.1,TA-0043-0045,R5 | T-0002,T-0005 | src/components/redirects/component.py | TA-0043,TA-0044,TA-0045 | done | artifacts/pytest-redirects-report.json | 73 tests for TA-0043 (loop) + TA-0044 (open redirect) + TA-0045 (chain); Completed 2026-01-12 |
| T-0040 | Implement admin redirects API + UI | E7.1 | T-0039 | shell/http/admin_redirects.py, shell/ui/redirects.* | TA-0043-0045 | done | artifacts/pytest-admin-redirects-api-report.json | 25 tests for TA-0043-0045 (loops/open redirect/chain); API at /api/admin/redirects; Completed 2026-01-12 |
| T-0041 | Wire public redirect resolver into routing path | E7.2,TA-0046 | T-0039,T-0012 | shell/http/public_redirects.py | TA-0046 | done | artifacts/pytest-public-redirects-report.json | 20 tests for TA-0046 (routing integration + UTM preservation); Completed 2026-01-12 |
| T-0042 | Ensure canonical tags after redirects | E7.2,TA-0047 | T-0041,T-0011 | src/components/render/component.py (canonical) | TA-0047 | done | artifacts/pytest-canonical-report.json | 37 tests for TA-0047 (canonical URL generation + redirect resolution); Completed 2026-01-12 |
| T-0043 | Implement AuditLogService + storage | E8.1,TA-0048-0049 | T-0005 | src/components/audit/component.py | TA-0048 | done | artifacts/pytest-audit-report.json | 31 tests for TA-0048 (entry creation) + TA-0049 (querying); Completed 2026-01-12 |
| T-0044 | Add audit hooks to settings/content/assets/schedule/redirects | E8.1 | T-0043,T-0009,T-0014,T-0029,T-0040 | shell/hooks/audit_hooks.py | TA-0049 | done | artifacts/pytest-audit-hooks-report.json | 31 tests for TA-0049 (audit integration hooks); Completed 2026-01-12 |
| T-0045 | Admin audit log API + UI | E8.1 | T-0044 | shell/http/admin_audit.py, shell/ui/audit.* | TA-0049 | done | Frontend Build Pass; Manual UI + Service connection; Completed 2026-01-12 |
| T-0046 | Implement public-only visibility guard for drafts/scheduled across all routes + sitemap | R1 | T-0012,T-0018,T-0021 | shell/http/visibility.py | TA-0000 | todo |  |  |
| T-0047 | Add privacy schema enforcement check in CI (no PII columns) | R4,TA-0035 | T-0003,T-0005,T-0035 | scripts/privacy_schema_check.py | TA-0035 | todo |  |  |
| T-0048 | Implement backups + restore drill script + documentation | NFR-R2,TA-0050 | T-0005,T-0006 | scripts/backup.py, scripts/restore_drill.py, docs/ops.md | TA-0050 | todo |  |  |
| T-0049 | Add health endpoints + metrics scaffolding | NFR-R3 | T-0001 | shell/http/health.py | TA-0120 (health) | done | artifacts/pytest-health-report.json | 45 tests for TA-0120 (health/ready/live/metrics); Completed 2026-01-12 |
| T-0050 | End-to-end regression suite for R1–R6 | R1-R6 | T-0013,T-0037,T-0040,T-0045,T-0049 | tests/e2e/* | TA-0200 (regression pack) | done | Playwright Regression Pack (9/9 passed); Completed 2026-01-12 | |
